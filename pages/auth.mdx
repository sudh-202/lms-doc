# Clerk | NextJS 

Clerk's `Next.js SDK{:jsx}` has prebuilt components, React hooks, and helpers to make user authentication easier.

### Install `@clerk/nextjs`

To get started using Clerk with Next.js, add the SDK to your project:

```js filename="npm" {:jsx} copy
npm install @clerk/nextjs
```
---------------------------------------------------------

### Set your environment variables


1. Navigate to the Clerk Dashboard.
2. In the navigation sidebar, select `API Keys`.
3. In the `Quick Copy` section, copy your Clerk publishable and secret key.
4. Paste your keys into your `.env.local file`.

The final result should resemble the following:

``` js filename=".env" copy
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=YOUR_PUBLISHABLE_KEY
CLERK_SECRET_KEY=YOUR_SECRET_KEY
```

---------------------------------------------------------

### Add Middleware to your application

`clerkMiddleware()` grants you access to user authentication state throughout your application, on any route or page. It also allows you to protect specific routes from unauthenticated users. To add `clerkMiddleware()` to your application, follow these steps:

   1. Create a `middleware.ts` file.
    - If you're using the `/src` directory, place` middleware.ts` in the `/src` directory.
    - If you're not using the /src directory, place` `middleware.ts`` in the root directory alongside `.env`.

   2. In your middleware.ts, export Clerk's `clerkMiddleware()` helper:

   ``` ts copy filename="middleware.ts" showLineNumbers
 import { clerkMiddleware } from "@clerk/nextjs/server";

export default clerkMiddleware();

export const config = {
  matcher: ['/((?!.*\\..*|_next).*)', '/', '/(api|trpc)(.*)'],
};
```

3. By default, clerkMiddleware() will not protect any routes. All routes are public and you must opt-in to protection for routes. See the clerkMiddleware() reference to learn how to require authentication for specific routes.

---------------------------------------------------------

### Add `<ClerkProvider>` and components to your app

All Clerk hooks and components must be children of the `<ClerkProvider>` component, which provides active session and user context.

You can control which content signed in and signed out users can see with `Clerk's prebuilt components`. To get started, create a header for your users to sign in or out.



- `<SignedIn>`: Children of this component can only be seen while `signed in`.
- `<SignedOut>`: Children of this component can only be seen while `signed out`.
- `<UserButton /`>: A prebuilt component that comes styled out of the box to show the avatar from the account the user is signed in with.
- `<SignInButton />`: An unstyled component that links to the sign-in page or displays the sign-in modal.

Select your preferred router to learn how to make this data available across your entire app, in this case we are using custom routes so this is the code   :

``` tsx copy showLineNumbers filename="app/layout.tsx"
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';

import { ClerkProvider } from '@clerk/nextjs';

import ToastProvider from '@/components/providers/toaster-provider';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
};

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <ClerkProvider>
      <html lang='en'>
        <body className={inter.className}>
          <ToastProvider/>
          {children}
        </body>
      </html>
    </ClerkProvider>
  );
}
```

---------------------------------------------------------

### Build a sign-up page

Create a new file that will be used to render the sign-up page. In the file, import the `<SignUp />` component from `@clerk/nextjs` and render it.
``` tsx copy showLineNumbers filename="app/sign-up/[[...sign-up]]/page.tsx"
import { SignUp } from "@clerk/nextjs";

export default function Page() {
  return <SignUp />;
}
```
---------------------------------------------------------

### Build a sign-up page

Create a new file that will be used to render the sign-up page. In the file, import the `<SignIn />` component from `@clerk/nextjs` and render it.
``` tsx copy showLineNumbers filename="app/sign-in/[[...sign-in]]/page.tsx"
import { SignIn } from "@clerk/nextjs";

export default function Page() {
  return <SignIn />;
}
```

---------------------------------------------------------

### Update your environment variables

In the previous steps, a path prop is passed to the `<SignIn />` and `<SignUp />` components. This is because the components need to know which route they are originally mounted on.

In Next.js applications, you can either pass the `path` prop, or you can define the `NEXT_PUBLIC_CLERK_SIGN_IN_URL` and `NEXT_PUBLIC_CLERK_SIGN_UP_URL` environment variables, like so:

``` tsx copy showLineNumbers filename=".env"
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
```
---------------------------------------------------------

### Visit your new pages

Run your project with the following terminal command from the root directory of your project:
```js copy
npm run dev
```
